@startuml
title Domínio do Problema - Loja de Roupas Online

' ======= CLASSES DE DOMÍNIO ========


class Produto {
    -id: String
    -nome: String
    -tamanho: String
    -cor: String
    -descricao: String
}

class ItemEstoque {
    -quantidade: int

}

class Categoria {
    -nome: String

}

'atualize o uml do estoque, pois ele não condiz com o algoritmo.
class Estoque {
    + addItem(produto : Produto, quantidade : int) : void
    + diminuirItem(codigo : String, quantidade : int) : void
    + temProdutoNoEstoque(codigo : String) : boolean
    + exibirEstoque() : void
    
}



class TabelaPreco {
    -id: String
    -precoBase: BigDecimal
    -precoPromocional: BigDecimal
    -dataInicio: Date
    -dataFim: Date
    +calcularPreçoVigente()
}

class Usuario {
    -id:String
    -nome:String
    -email:String
    -senha:String
    -telefone:String
}



class Cliente extends Usuario {
    -id:String
    -nome:String
    -email:String
    +adicionarEndereco()
    +localizarEndereco()
}

class Funcionario extends Usuario {
}

class Endereco {
    -cep: String
    -rua: String
    -numero: String
    -bairro: String
    -complemento: String
}

enum StatusDisponibilidadeEstoque {
    DISPONIVEL
    INDISPONIVEL
    QTD_INSUFICIENTE
}

class ItemCarrinho {
    -quantidade: int


}

class Carrinho {

    +limparComPreco()
    +calcularTotal(): double
    +calcularTotalComPreco(): double
    +adicionarProduto()
    +adicionarProdutoComPreco()
    +removerProdutoDoCarrinho()
}


class Pedido {
    -id: String
    -dataPedido: Date
    -status: StatusPedido
}

class ItemPedido {
    -quantidade: int
    -precoUnitario: double

}

class TotalPedido {
    -valorFrete: BigDecimal
    -valorDesconto: BigDecimal
}

class Pagamento {
    -id: String
    -valorTotal: BigDecimal

}



class NotaFiscal {
    -id: String
    -dataEmissao: Date
}

enum MetodoPagamento {
    CARTAO_CREDITO
    CARTAO_DEBITO
    BOLETO
    PIX
}

enum StatusPagamento {
    PENDENTE
    CONFIRMADO
    CANCELADO
    ESTORNADO
}

enum StatusPedido {
    PROCESSANDO
    ENVIADO
    ENTREGUE
    CANCELADO
}

class Loja {
    -id:int
    -nome:String
}

' ========== AGREGACOES E COMPOSICOES =========

' Produto é composto por Tabela de Preço (não existe sem)
Produto "1" -- "*" TabelaPreco

' Estoque possui ItemEstoque (composição)
Estoque "1" *--> "0..*" ItemEstoque

' ItemEstoque referencia Produto (associação)
ItemEstoque "1" --> "*" Produto

' Produto associa-se a Categoria (associação)
Categoria "1" <-- "*" Produto

' Carrinho é agregado por ItemCarrinho
Carrinho "1" o-- "0..*" ItemCarrinho

' ItemCarrinho associa Produto
ItemCarrinho "1" -- "1" Produto

' Pedido é composto por ItemPedido
Pedido *-- "*" ItemPedido

' ItemPedido também referencia Produto
ItemPedido "1" -- "*" Produto

' Pedido pertence a uma Loja (agregação)
Loja o-- "*" Pedido

' Pedido possui TotalPedido (composição)
Pedido *-- "1" TotalPedido

' Pedido possui um endereço de entrega (agregação)
Pedido o-- "1" Endereco

' Cliente possui endereços (agregação)
Cliente o-- "*" Endereco

' Cliente possui Carrinho (composição)
Cliente *-- "1" Carrinho

' Pedido gera nota fiscal (composição)
Pedido *-- "1" NotaFiscal

' Pagamento é associado ao Pedido (composição — depende do Pedido)
Pedido o-- "1" Pagamento

' Pagamento usa enums
Pagamento ..> MetodoPagamento
Pagamento ..> StatusPagamento


@enduml




@startuml
title DIAGRAMA DO SISTEMA - Loja Online

package "Sistema" {

    class Sistema {
        // Atributos
        -sistema: Sistema
        -produtos: Map<String, Produto>
        -categorias: Map<String, Categoria>
        -tabelasPreco: Map<String, TabelaPreco>
        -estoques: Map<String, Estoque>
        -pedidos: Map<String, Pedido>
        -clientes: Map<String, Cliente>
        -carrinhos: Map<String, Carrinho>
        -tabelaEstoque: Map<String, Integer>
        -geradorSku: GeradorSku

        // Métodos
        +cadastrarProduto(nome: String, tamanho: String, cor: String, descricao: String, categoria: String)
        +mostrarProdutosNaoVinculadosAoEstoque()
        +cadastrarCategoria(categoria: String)
        +criarEstoque(nome: String)
        +adiconarProdutoEstoque(nomeEstoque: String, id: String, quantidade: int)
        +diminuirProdutoEstoque(nomeEstoque: String, id: String, quantidade: int)
        +mostrarEstoque()
        +mostrarEstoque(nome: String)
        +definirPrecoPadrao(produtoId: String, valor: double)
        +adicionarPromocao(produtoId: String, valor: double, inicio: LocalDate, fim: LocalDate)
        +consultarPreco(produtoID: String): double
        +consultarPrecoEm(produtoId: String, data: LocalDate): double
        +mostrarProdutosComPreco()
        +adicionarAoCarrinho(produtoId: String, quantidade: int)
        +mostrarCarrinhoDetalhado()
        +adicionarAoCarrinhoParaCliente(clienteId: String, produtoId: String, quantidade: int)
        +mostrarCarrinhoDetalhadoParaCliente(clienteId: String)
        +finalizarCompraParaCliente(clienteId: String)
        +finalizarCompra()
        +criarPedido(idCliente: String)
        +adicionarItemAoPedido(idPedido: String, idProduto: String, qtd: int)
        +configurarFreteDesconto(idPedido: String, frete: BigDecimal, desconto: BigDecimal)
        +registrarPagamento(idPedido: String, metodo: MetodoPagamento)
        +confirmarPagamento(idPedido: String)
        +cancelarPagamento(idPedido: String)
        +exibirPedido(idPedido: String)
        +cadastrarCliente(nome: String, email: String, cpf: String)
        +mostrarCliente(idCliente: String)
        +listarClientes()
        +getNomesCategorias(): List<String>
    }

    class Produto {

    }

    class Categoria {

    }

    class TabelaPreco {

    }

    class Estoque {

    }

    class Pedido {

    }


    class Cliente {

    }

    class Carrinho {

    }


}

' -------------------- LIGAÇÕES DO SISTEMA --------------------

Sistema --> Produto
Sistema --> Categoria
Sistema --> TabelaPreco
Sistema --> Pedido
Sistema --> Cliente
Sistema --> Carrinho
Sistema --> Estoque



@enduml
